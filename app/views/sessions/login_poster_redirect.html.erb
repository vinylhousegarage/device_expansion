<script>
  fetch('<%= login_poster_session_path(@user.id) %>', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-CSRF-Token': '<%= form_authenticity_token %>'
    }
  })
  .then(response => response.json())
  .then(data => {
    if (data.redirect_url) {
      window.location.href = data.redirect_url;
    } else {
      document.body.innerHTML += `<p>Not redirected</p>`;
    }
  })
  .catch(error => {
    document.body.innerHTML += `<p>Error: ${error.message}</p>`;
  });
</script>
